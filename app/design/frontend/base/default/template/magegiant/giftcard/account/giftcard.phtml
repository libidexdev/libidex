<?php
/**
 * Magegiant
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the magegiant.com license that is
 * available through the world-wide-web at this URL:
 * http://magegiant.com/license-agreement/
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Magegiant
 * @package     Magegiant_GiftCard
 * @copyright   Copyright (c) 2014 Magegiant (http://magegiant.com/)
 * @license     http://magegiant.com/license-agreement/
 */
?>

<div class="giftcard-dashboard">
    <div class="page-title">
        <h1><?php echo $this->__('Gift Card') ?></h1>
    </div>
	<?php echo $this->getMessagesBlock()->toHtml() ?>

	<div class="giftcard-check-status">
		<form id="giftcard-form" action="<?php echo $this->getUrl('giftcard/index/add') ?>" method="post">
			<div class="fieldset">
				<ul class="form-list">
					<li>
						<label for="giftcard_code"><?php echo $this->__('Enter gift card code') ?></label>
						<div class="input-box">
							<input class="required-entry input-text" type="text" id="gift_code" name="gift_code" value="">
						</div>
					</li>
				</ul>
				<div id="check-gc-please-wait" class="gc-please-wait" style="display: none; margin-top: 15px;">
					<img src="<?php echo $this->getSkinUrl('images/opc-ajax-loader.gif') ?>" class="v-middle"> <?php echo $this->__('Please wait, loading...') ?>
				</div>
				<div class="check-gc-status" id="check-gc-status" style="display: none; margin-top: 15px;"></div>
				<div class="buttons-set form-buttons btn-only" style="margin-top: 2em">
					<?php foreach ($this->getButtons() as $button): ?>
						<button class="button" id="<?php echo $button->getName() ?>" onclick="<?php echo ($button->getType() == 'ajax') ? 'checkGiftcard(\'' . $button->getUrl() . '\')' : 'submitGiftcardForm(\'' . $button->getUrl() . '\')'; ?>" type="button" value="<?php echo $button->getLabel() ?>"><span><span><?php echo $button->getLabel() ?></span></span></button>
					<?php endforeach; ?>
				</div>
			</div>
		</form>
	</div>

	<?php echo $this->getChildHtml('gc.extra') ?>

	<script type="text/javascript">
		//<![CDATA[
		var giftcardForm = new VarienForm('giftcard-form', false);

		function submitGiftcardForm(url) {
			var $form = $('giftcard-form');
			if (url) {
				$form.action = url;
			}
			giftcardForm.submit();
		}
		//]]>
	</script>
</div>