<?php
/**
 * Magegiant
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the magegiant.com license that is
 * available through the world-wide-web at this URL:
 * http://magegiant.com/license-agreement/
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Magegiant
 * @package     Magegiant_GiftCard
 * @copyright   Copyright (c) 2014 Magegiant (http://magegiant.com/)
 * @license     http://magegiant.com/license-agreement/
 */
?>

<?php $_collection = $this->getCollection(); ?>

<div class="fieldset">
	<h2 class="legend"><?php echo $this->__('Gift Card History') ?></h2>
	<?php echo $this->getPagerHtml() ?>
	<table class="data-table" id="giftcard-view-history">
		<colgroup>
			<col class="date"/>
			<col class="action"/>
			<col class="amount_change"/>
			<col class="amount"/>
			<col class="information"/>
		</colgroup>
		<thead>
			<tr>
				<th><?php echo $this->__('Date') ?></th>
				<th><?php echo $this->__('Action') ?></th>
				<th><?php echo $this->__('Balance Change') ?></th>
				<th><?php echo $this->__('Balance') ?></th>
				<th><?php echo $this->__('Additional Information') ?></th>
			</tr>
		</thead>
		<tbody>
			<?php if (count($_collection)): ?>
				<?php foreach ($_collection as $history): ?>
					<tr>
						<td><span class="nobr"><?php echo $this->formatDate($history->getUpdatedAt(), 'medium') ?></span></td>
						<td><span><?php echo $history->getActionLabel() ?></span></td>
						<td class="a-right"><?php echo Mage::helper('core')->formatPrice($history->getAmountChange()) ?></td>
						<td class="a-right"><?php echo Mage::helper('core')->formatPrice($history->getAmount()) ?></td>
						<td><span><?php echo $history->getHistoryDetail() ?></span></td>
					</tr>
				<?php endforeach ?>
			<?php else: ?>
				<tr>
					<td colspan="6">
						<span><?php echo $this->__('No action found!') ?></span>
					</td>
				</tr>
			<?php endif; ?>
		</tbody>
	</table>
	<?php echo $this->getPagerHtml() ?>
</div>